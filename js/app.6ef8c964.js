(function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-overlay",{attrs:{show:e.loading,"no-wrap":""}}),e.login?n("NavBar"):e._e(),n("router-view",{class:{container:e.login}}),n("Alert")],1)},r=[],i=n("5530"),s=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[n("b-navbar-brand",[e._v(" SPA 2020 ")]),e.display>0?n("b-navbar-nav",{staticClass:"mr-auto"},[n("b-nav-item",[n("b-badge",{staticClass:"p-2 text-uppercase mr-2",attrs:{variant:"light"}},[n("b-icon",{attrs:{icon:"door-open"}}),e._v(" "+e._s(e.tabActual)+" ")],1)],1)],1):e._e(),n("b-navbar-toggle",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-1",modifiers:{"sidebar-1":!0}}],attrs:{target:"nav-collapse1",id:"toggle"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",e._l(e.tabs,(function(t,a){return n("b-nav-item",{key:a,attrs:{to:t.ruta,disabled:e.actived(t,e.userAccessTo),replace:""}},[e._v(" "+e._s(t.titulo)+" ")])})),1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[n("b-avatar"),e._v(" "+e._s(e.userName)+" ")],1)]},proxy:!0}])},[n("b-dropdown-item",{on:{click:function(t){return e.logout(e.$router)}}},[e._v(" Cerrar sesion ")]),n("b-dropdown-item",{on:{click:function(t){return e.resetUrlApi()}}},[e._v(" Reset urlApi ")])],1)],1)],1)],1),n("NavBarSlider",{attrs:{router:e.$router}})],1)},l=[],u=(n("7db0"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-sidebar",{attrs:{id:"sidebar-1",title:"SPA 2020",backdrop:!0}},[n("div",{staticClass:"px-3 py-5 overflow-auto"},[n("div",{staticClass:"d-flex justify-content-center"},[n("b-avatar",{attrs:{variant:"info",size:"6rem"}})],1),n("div",{staticClass:"d-flex justify-content-around"},[n("div",[n("strong",[e._v(e._s(e.userName))])])]),n("b-list-group",{staticClass:"mt-2 mb-5"},e._l(e.tabs,(function(t,a){return n("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center",attrs:{to:t.ruta,active:e.isFocused(t),variant:"light",disabled:e.actived(t,e.userAccessTo),replace:""}},[n("div",{staticClass:"any"},[n("b-icon",{attrs:{icon:t.icono}}),e._v(" "+e._s(t.titulo)+" ")],1),e.actived(t,e.userAccessTo)?n("b-badge",{attrs:{variant:"danger",pill:""}},[e._v(" off ")]):e._e()],1)})),1),n("b-button",{attrs:{block:"",variant:"info"},on:{click:function(t){return e.logout(e.router)}}},[e._v(" Cerrar sesion ")]),n("b-button",{attrs:{block:"",variant:"warning"},on:{click:function(t){return e.resetUrlApi()}}},[e._v(" Reset urlApi ")])],1)])],1)}),d=[],f={name:"NavBarSlider",props:{router:Object},methods:Object(i["a"])(Object(i["a"])({},Object(s["c"])(["logout","showAlertDialog"])),{},{actived:function(e,t){var n=e.name,a=t.find((function(e){return e===n}));return"undefined"===typeof a},isFocused:function(e){var t=e.name;return this.$route.name===t},resetUrlApi:function(){localStorage.removeItem("apiConexiones"),this.showAlertDialog(["Url eliminada"]),this.logout(this.$router)}}),computed:Object(i["a"])({},Object(s["d"])(["tabs","userAccessTo","userName"]))},p=f,m=n("2877"),b=Object(m["a"])(p,u,d,!1,null,null,null),g=b.exports,v={name:"NavBar",components:{NavBarSlider:g},data:function(){return{data:0,display:0}},mounted:function(){var e=document.getElementById("toggle");this.display=e.offsetTop;var t=this;window.addEventListener("resize",(function(){var n=e.offsetTop;t.display=n}))},methods:Object(i["a"])(Object(i["a"])({},Object(s["c"])(["logout","showAlertDialog"])),{},{actived:function(e,t){var n=e.name,a=t.find((function(e){return e===n}));return"undefined"===typeof a},resetUrlApi:function(){localStorage.removeItem("apiConexiones"),this.showAlertDialog(["Url eliminada"]),this.logout(this.$router)}}),computed:Object(i["a"])({},Object(s["d"])(["tabs","userAccessTo","userName","tabActual"]))},h=v,x=Object(m["a"])(h,c,l,!1,null,null,null),A=x.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{visible:e.alertShow,title:e.alertTitle,"header-bg-variant":e.alertHeaderBg,"header-text-variant":e.alertHeaderText,centered:!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:e.hideAlertDialog}},[e._v(" Aceptar ")])],1)]},proxy:!0}])},[n("b-container",{attrs:{fluid:""}},[e._v(" "+e._s(e.alertMessage)+" ")])],1)},O=[],C={name:"Alert",methods:Object(i["a"])({},Object(s["c"])(["hideAlertDialog"])),computed:Object(i["a"])({},Object(s["d"])(["alertShow","alertTitle","alertMessage","alertHeaderBg","alertHeaderText"]))},S=C,_=Object(m["a"])(S,y,O,!1,null,null,null),w=_.exports,k={name:"app",components:{NavBar:A,Alert:w},computed:Object(i["a"])({},Object(s["d"])(["loading","login"]))},j=k,T=Object(m["a"])(j,o,r,!1,null,null,null),N=T.exports,P=(n("45fc"),n("8c4f")),D=(n("4de4"),n("498a"),n("96cf"),n("1da1")),I=n("3835"),E=n("bc3a"),U=n.n(E),L=n("f61f");a["default"].use(s["a"]);var $=new s["a"].Store({state:{conexiones:[],loading:!1,tabs:[{titulo:"Inicio",icono:"house-fill",ruta:"/",name:"Home"},{titulo:"Conexiones",icono:"cloud-fill",ruta:"/conexiones",name:"Conexiones"}],tabActual:"Inicio",login:localStorage.getItem("session")||!1,userName:localStorage.getItem("userName")||"",userPrivilegios:localStorage.getItem("userPrivilegios")||"",userAccessTo:JSON.parse(localStorage.getItem("userAccessTo"))||["Login"],alertShow:!1,alertMessage:"Prueba de alerta",alertTitle:"Advertencia",alertHeaderBg:"warning",alertHeaderText:"light"},mutations:{setData:function(e,t){e.conexiones=t},setLoading:function(e,t){e.loading=t},login:function(e,t){e.userName=t.nameUser,e.userPrivilegios=t.privilegios,e.userAccessTo=t.accessTo,e.login=!0,localStorage.setItem("userName",t.nameUser),localStorage.setItem("userPrivilegios",t.privilegios);var n=JSON.stringify(t.accessTo);localStorage.setItem("userAccessTo",n),localStorage.setItem("session",!0),localStorage.setItem("apiConexiones",t.apiValidaConexion)},logout:function(e,t){e.userName="",e.userPrivilegios="",e.userAccessTo=[],e.login=!1,localStorage.removeItem("userName"),localStorage.removeItem("userPrivilegios"),localStorage.removeItem("userAccessTo"),localStorage.removeItem("session"),t.push({name:"Login"})},showAlertDialog:function(e,t){var n=Object(I["a"])(t,4),a=n[0],o=void 0===a?null:a,r=n[1],i=void 0===r?"Advertencia":r,s=n[2],c=void 0===s?"warning":s,l=n[3],u=void 0===l?"light":l;null!==o&&(e.alertShow=!0,e.alertMessage=o,e.alertTitle=i,e.alertHeaderBg=c,e.alertHeaderText=u)},hideAlertDialog:function(e){e.alertShow=!1},tabPermision:function(e){var t=e.tabs.filter((function(t){var n=e.userAccessTo.find((function(e){return e===t.name}));return"undefined"!==typeof n}));return t},setTabActual:function(e,t){var n=e.tabs.find((function(e){return e.name===t}));e.tabActual=n.titulo}},actions:{getConexions:function(e){var t=e.commit;t("setLoading",!0),U.a.get(localStorage.getItem("apiConexiones")).then((function(e){t("setData",e.data.data),t("setLoading",!1)})).catch((function(e){console.log(e),t("setLoading",!1)}))},initSesion:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i,s,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,o=Object(I["a"])(t,4),r=o[0],i=o[1],s=o[2],c=o[3],r=r.trim(),i=i.trim(),r===L["USER_TEMP"]){n.next=7;break}return a("showAlertDialog",["Usuario incorrecto"]),n.abrupt("return");case 7:if(i===L["PASSWORD_TEMP"]){n.next=10;break}return a("showAlertDialog",["Contrase単a incorrecta"]),n.abrupt("return");case 10:return l={nameUser:r,privilegios:"all",accessTo:["Conexiones","Home"],apiValidaConexion:c},a("login",l),s.push({name:l.accessTo[0]}),n.abrupt("return");case 14:case"end":return n.stop()}}),n)})))()},setActiveByTitulo:function(e,t){var n=e.commit,a=e.state,o=a.tabs.find((function(e){return e.titulo===t.toLowerCase()})),r="undefined"===typeof o?a.tabs[0]:o;n("setActive",r)},initSesionByFirebase:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i,s,c,l,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,o=Object(I["a"])(t,3),r=o[0],i=o[1],s=o[2],n.prev=2,r=r.trim(),a("setLoading",!0),n.next=7,U()({method:"post",url:"apiUrlLogin",data:{user:r,password:i}});case 7:if(c=n.sent,l=c.data.data,!1!==l.success){n.next=13;break}a("showAlertDialog",[l.message]),n.next=18;break;case 13:return u={nameUser:r,privilegios:l.privilegios,accessTo:l.accessTo},a("login",u),s.push({name:u.accessTo[0]}),a("setLoading",!1),n.abrupt("return");case 18:a("setLoading",!1),n.next=26;break;case 21:n.prev=21,n.t0=n["catch"](2),console.log(n.t0.response),void 0!==n.t0.response?a("showAlertDialog",[n.t0.response.data.message]):a("showAlertDialog",["No hay conexion con el servidor"]),a("setLoading",!1);case 26:case"end":return n.stop()}}),n,null,[[2,21]])})))()}}}),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-3"},[n("h1",{staticClass:"text-center mb-3"},[e._v("Super Promociones de Acayucan")]),n("b-img",{attrs:{src:"https://picsum.photos/1024/400/?image=2",fluid:"",alt:"Responsive image"}})],1)},B=[],M={name:"Home"},H=M,z=Object(m["a"])(H,R,B,!1,null,null,null),q=z.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Conexiones",{staticClass:"mt-2"}),n("FloatButton",{attrs:{click:e.getConexions}})],1)},G=[],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-list-group",[e._l(e.conexionesSkeleton,(function(e){return n("ConexionesItemSkeleton",{key:e+"skeleto"})})),e._l(e.conexiones,(function(e,t){return n("ConexionesItem",{key:t,attrs:{sucursal:e}})}))],2)],1)},J=[],Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-list-group-item",{staticClass:"d-flex align-items-center"},[n("b-icon",{staticClass:"mr-3",attrs:{variant:e.isOn(e.sucursal.success),icon:e.loadActive(e.sucursal.success),"font-scale":"2"}}),n("span",{staticClass:"mr-auto"},[n("strong",[e._v(e._s(e.NAMES_SUC[e.sucursal.conexion]))])]),n("b-badge",{attrs:{variant:"ligth"}},[e._v(e._s(e.sucursal.message))])],1)},W=[],Z={name:"ConexionesItem",props:{sucursal:Object},data:function(){return{NAMES_SUC:L["NAMES_SUC"]}},methods:{loadActive:function(e){return e?"toggle-on":"toggle-off"},isOn:function(e){return e?"primary":"danger"}}},K=Z,Q=Object(m["a"])(K,Y,W,!1,null,null,null),X=Q.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.thereAreConections?e._e():n("b-card",[n("b-row",[n("b-col",{attrs:{cols:"2"}},[n("b-skeleton",{attrs:{type:"avatar",width:"20px",height:"20px"}})],1),n("b-col",{attrs:{cols:"6"}},[n("b-skeleton",{attrs:{height:"20px"}})],1),n("b-col",{attrs:{cols:"3"}},[n("b-skeleton",{attrs:{type:"button",height:"20px"}})],1)],1)],1)},te=[],ne={name:"ConexionesItemSkeleton",computed:Object(i["a"])(Object(i["a"])({},Object(s["d"])(["conexiones"])),{},{thereAreConections:function(){return this.conexiones.length>0}})},ae=ne,oe=Object(m["a"])(ae,ee,te,!1,null,null,null),re=oe.exports,ie={name:"Conexiones",data:function(){return{conexionesSkeleton:[0,1,2,3,4]}},components:{ConexionesItem:X,ConexionesItemSkeleton:re},computed:Object(i["a"])({},Object(s["d"])(["conexiones"]))},se=ie,ce=Object(m["a"])(se,V,J,!1,null,null,null),le=ce.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-avatar",{staticClass:"Floatbtn",style:e.style,attrs:{variant:e.variant,icon:e.icon,size:e.size,button:!0},on:{click:e.click}})],1)},de=[],fe=(n("99af"),{name:"FloatButton",props:{icon:{type:String,require:!1,default:"arrow-counterclockwise"},variant:{type:String,require:!1,default:"primary"},size:{type:String,require:!1,default:"3rem"},alignVertical:{type:String,require:!1,default:"bottom"},alignHorizontal:{type:String,require:!1,default:"right"},click:{type:Function,require:!1}},computed:{style:function(){var e="bottom"===this.alignVertical?"bottom: 15px;":"top: 15px;",t="right"===this.alignHorizontal?"right: 15px;":"left: 15px;";return"".concat(e," ").concat(t)}}}),pe=fe,me=(n("e259"),Object(m["a"])(pe,ue,de,!1,null,"1701419e",null)),be=me.exports,ge={name:"ViewConexion",components:{FloatButton:be,Conexiones:le},methods:Object(i["a"])({},Object(s["b"])(["getConexions"]))},ve=ge,he=Object(m["a"])(ve,F,G,!1,null,null,null),xe=he.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"background"},[n("b-card",{staticClass:"modal-dialog-centered card-login"},[n("div",{staticClass:"d-flex justify-content-center"},[n("b-avatar",{attrs:{icon:"person-circle",variant:"secundary",size:"9rem"}})],1),n("b-form-input",{ref:"user",staticClass:"mb-4",attrs:{placeholder:"Usuario"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.focusPassword(t)}},model:{value:e.textUser,callback:function(t){e.textUser=t},expression:"textUser"}}),n("b-form-input",{ref:"password",staticClass:"mb-4",attrs:{type:e.status,placeholder:"Contrase単a"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.focusApi(t)}},model:{value:e.textPassword,callback:function(t){e.textPassword=t},expression:"textPassword"}}),e.existApi?e._e():n("b-form-input",{ref:"textApi",staticClass:"mb-4",attrs:{type:"text",placeholder:"apiValidarConexion"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitData()}},model:{value:e.apiConexiones,callback:function(t){e.apiConexiones=t},expression:"apiConexiones"}}),n("b-button",{ref:"btnInicia",staticClass:"mb-4",attrs:{block:"",variant:"primary"},on:{click:function(t){return e.submitData()}}},[e._v(" Iniciar sesion ")]),n("b-form-checkbox",{attrs:{value:"text","unchecked-value":"password"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[e._v(" Mostrar contrase単a ")])],1)],1)},ye=[],Oe={name:"Login",data:function(){return{status:"password",textUser:"",textPassword:"",apiConexiones:"",existApi:!1}},mounted:function(){this.existApi=null!==localStorage.getItem("apiConexiones"),this.$refs.user.focus()},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])(["initSesion"])),Object(s["c"])(["showAlertDialog"])),{},{focusApi:function(){this.existApi?this.submitData():this.$refs.textApi.focus()},focusPassword:function(){this.$refs.password.focus()},submitData:function(){""!==this.textUser.trim()?""!==this.textPassword.trim()?(console.log(this.apiConexiones.trim(),!this.existApi),""!==this.apiConexiones.trim()||this.existApi?(this.existApi&&(this.apiConexiones=localStorage.getItem("apiConexiones")),this.initSesion([this.textUser,this.textPassword,this.$router,this.apiConexiones])):this.showAlertDialog(["falta ingresar la url de apiValidarConexiones"])):this.showAlertDialog(["Campo contrase単a vacio"]):this.showAlertDialog(["Campo usuario vacio"])}})},Ce=Oe,Se=(n("d211"),Object(m["a"])(Ce,Ae,ye,!1,null,"3380806a",null)),_e=Se.exports;a["default"].use(P["a"]);var we=[{path:"/",name:"Home",component:q,meta:{requiresAuth:!0}},{path:"/conexiones",name:"Conexiones",component:xe,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:_e}],ke=new P["a"]({mode:"history",base:"",routes:we}),je=function(e){var t=$.state.userAccessTo.find((function(t){return t===e}));return"undefined"!==typeof t},Te=function(e){var t=we.find((function(t){return t.name===e}));return"undefined"!==typeof t};ke.beforeEach((function(e,t,n){if(e.matched.some((function(e){return e.meta.requiresAuth})))$.state.login?($.commit("setTabActual",e.name),console.log("estas logueado"),je(e.name)?n():$.commit("showAlertDialog",["No tienes autorizacion para entrar a esta ruta"])):(console.log("sesion cerrada"),n({name:"Login"}));else{if(console.log("sin auntenticar"),"Login"===e.name&&$.state.login)return console.log("sesion abierta"),void n({name:$.state.userAccessTo[0]});if("Login"!==e.name&&!$.state.login)return void n({name:"Login"});if(!Te(e.name))return void n({name:"Home"});console.log("No estas logueado"),n()}}));var Ne=ke,Pe=n("5f5b"),De=n("b1e0");n("f9e3"),n("2dd8");a["default"].use(Pe["a"]),a["default"].use(De["a"]),a["default"].config.productionTip=!1,new a["default"]({router:Ne,store:$,render:function(e){return e(N)}}).$mount("#app")},d211:function(e,t,n){"use strict";n("e847")},e259:function(e,t,n){"use strict";n("ef1e")},e847:function(e,t,n){},ef1e:function(e,t,n){},f61f:function(e,t){var n=function(){var e="admin",t="spa2011",n={};return n["".concat("SPASUPERUNO.DYNDNS.ORG")]="ZARAGOZA",n["".concat("SPACENTRO.DYNDNS.ORG")]="VICTORIA",n["".concat("SPAOLUTA.DYNDNS.ORG")]="OLUTA",n["".concat("SPABODEGA.DYNDNS.ORG")]="BODEGA",n["".concat("SPAJALTIPAN.DYNDNS.ORG")]="JALTIPAN",{NAMES_SUC:n,USER_TEMP:e,PASSWORD_TEMP:t}}();e.exports=n}});
//# sourceMappingURL=app.6ef8c964.js.map